Bootstrap:docker
From: nvidia/cuda:11.0.3-cudnn8-runtime-ubuntu18.04

%post


  apt-get update -y
  apt-get install -y perl-base
  apt-get install -y libxml-dom-perl
  apt-get install -y git
  apt-get install -y build-essential

  apt update && apt install --yes --no-install-recommends python3-pip
  rm -rf /var/lib/apt/lists/*
  ln -s /usr/bin/python3 /usr/bin/python

  pip3 --no-cache-dir install --upgrade pip setuptools wheel
  pip install --no-cache-dir \
      tensorflow==1.15.0 \
      pandas \
      tabulate \
      nvidia-pyindex \
      horovod \
      pydrive

  git clone https://github.com/andersjo/pyrouge.git
  cd pyrouge/tools/ROUGE-1.5.5
  export SET_ROUGE_PATH=$(pwd)

  export ROUGE_EVAL_HOME=$(pwd)
  cd data/WordNet-2.0-Exceptions/
  ./buildExeptionDB.pl . exc WordNet-2.0.exc.db
  cd ../
  
  git clone https://github.com/bheinzerling/pyrouge.git
  cd pyrouge
  python setup.py install
  pyrouge_set_rouge_path /pyrouge/tools/ROUGE-1.5.5/

  cd /pyrouge/tools/ROUGE-1.5.5/data
  rm WordNet-2.0.exc.db
  ./WordNet-2.0-Exceptions/buildExeptionDB.pl ./WordNet-2.0-Exceptions ./smart_common_words.txt ./WordNet-2.0.exc.db
  
  python -m pyrouge.test
